var WorldTrackingModule=function(i,t,a,r,n,T){"use strict";function e(e,t,r,a){var n,o=arguments.length,i=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,a);else for(var T=e.length-1;0<=T;T--)(n=e[T])&&(i=(o<3?n(i):3<o?n(t,r,i):n(t,r))||i);return 3<o&&i&&Object.defineProperty(t,r,i),i}var o;(o=i.ARTrackableType||(i.ARTrackableType={}))["UNKNOWN"]="UNKNOWN",o["VERTICAL_PLANE"]="VERTICAL_PLANE",o["HORIZONTAL_PLANE"]="HORIZONTAL_PLANE",o["FEATURE_POINT"]="FEATURE_POINT",o["REMOTE"]="REMOTE",o["GEO"]="GEO";var l,c={0:i.ARTrackableType.UNKNOWN,1:i.ARTrackableType.VERTICAL_PLANE,2:i.ARTrackableType.HORIZONTAL_PLANE,3:i.ARTrackableType.FEATURE_POINT,4:i.ARTrackableType.REMOTE,5:i.ARTrackableType.GEO};(l=i.ARTrackableState||(i.ARTrackableState={}))["INITIALIZING"]="INITIALIZING",l["TRACKING"]="TRACKING",l["LOCALIZATION_ERROR"]="LOCALIZATION_ERROR",l["MAP_UNAVAILABLE_ERROR"]="MAP_UNAVAILABLE_ERROR",l["NETWORK_ERROR"]="NETWORK_ERROR",l["UNKNOWN_ERROR"]="UNKNOWN_ERROR";var E,A={0:i.ARTrackableState.INITIALIZING,1:i.ARTrackableState.TRACKING,2:i.ARTrackableState.LOCALIZATION_ERROR,3:i.ARTrackableState.MAP_UNAVAILABLE_ERROR,4:i.ARTrackableState.NETWORK_ERROR,5:i.ARTrackableState.UNKNOWN_ERROR};(E=i.ARGeoTrackableElevationType||(i.ARGeoTrackableElevationType={}))["CAMERA_BASED"]="CAMERA_BASED",E["ALTITUDE_BASED"]="ALTITUDE_BASED";var N;i.ARGeoTrackableElevationType.CAMERA_BASED,i.ARGeoTrackableElevationType.ALTITUDE_BASED;(N=i.HitTestType||(i.HitTestType={}))["HORIZONTAL_PLANE"]="HORIZONTAL_PLANE",N["VERTICAL_PLANE"]="VERTICAL_PLANE",N["ANY_PLANE"]="ANY_PLANE",N["FEATURE_POINT"]="FEATURE_POINT";var u,p,I={HORIZONTAL_PLANE:0,VERTICAL_PLANE:1,ANY_PLANE:2,FEATURE_POINT:3};i.HitTestType.HORIZONTAL_PLANE,i.HitTestType.VERTICAL_PLANE,i.HitTestType.ANY_PLANE,i.HitTestType.FEATURE_POINT;(p=u=u||{})["NOT_TRACKING"]="NOT_TRACKING",p["LOW"]="LOW",p["MEDIUM"]="MEDIUM",p["HIGH"]="HIGH";var d,R;u.NOT_TRACKING,u.LOW,u.MEDIUM,u.HIGH;(R=d=d||{})["NOT_TRACKING"]="NOT_TRACKING",R["LOW"]="LOW",R["HIGH"]="HIGH";var _;d.NOT_TRACKING,d.LOW,d.HIGH;(_=i.TrackingStateReason||(i.TrackingStateReason={}))["NONE"]="NONE",_["INITIALIZING"]="INITIALIZING",_["EXCESSIVE_MOTION"]="EXCESSIVE_MOTION",_["INSUFFICIENT_LIGHT"]="INSUFFICIENT_LIGHT",_["INSUFFICIENT_FEATURES"]="INSUFFICIENT_FEATURES";var O,b,y={0:i.TrackingStateReason.NONE,1:i.TrackingStateReason.INITIALIZING,2:i.TrackingStateReason.EXCESSIVE_MOTION,3:i.TrackingStateReason.INSUFFICIENT_LIGHT,4:i.TrackingStateReason.INSUFFICIENT_FEATURES};(b=O=O||{})["NONE"]="NONE",b["PLATFORM_SLAM"]="PLATFORM_SLAM",b["VIPERLITE"]="VIPERLITE",b["WOLF_OUTPUT_PLATFORM_SLAM"]="WOLF_OUTPUT_PLATFORM_SLAM",b["WOLF_OUTPUT_VIPERLITE"]="WOLF_OUTPUT_VIPERLITE";var L;O.NONE,O.PLATFORM_SLAM,O.VIPERLITE,O.WOLF_OUTPUT_PLATFORM_SLAM,O.WOLF_OUTPUT_VIPERLITE;(L=i.TrackingState||(i.TrackingState={}))["NOT_AVAILABLE"]="NOT_AVAILABLE",L["LIMITED"]="LIMITED",L["TRACKING"]="TRACKING";var S,f,s={0:i.TrackingState.NOT_AVAILABLE,1:i.TrackingState.LIMITED,2:i.TrackingState.TRACKING};(f=S=S||{})["ESTIMATED_HORIZONTAL_PLANE"]="ESTIMATED_HORIZONTAL_PLANE",f["ESTIMATED_VERTICAL_PLANE"]="ESTIMATED_VERTICAL_PLANE",f["EXISTING_PLANE"]="EXISTING_PLANE",f["EXISTING_PLANE_USING_EXTENT"]="EXISTING_PLANE_USING_EXTENT",f["EXISTING_PLANE_USING_GEOMETRY"]="EXISTING_PLANE_USING_GEOMETRY",f["FEATURE_POINT"]="FEATURE_POINT",f["MOVING_OBJECT"]="MOVING_OBJECT",f["NONE"]="NONE";var P,g;S.ESTIMATED_HORIZONTAL_PLANE,S.ESTIMATED_VERTICAL_PLANE,S.EXISTING_PLANE,S.EXISTING_PLANE_USING_EXTENT,S.EXISTING_PLANE_USING_GEOMETRY,S.FEATURE_POINT,S.MOVING_OBJECT,S.NONE;(g=P=P||{})["TAP"]="TAP",g["PAN"]="PAN",g["PINCH"]="PINCH",g["ROTATE"]="ROTATE",g["LONG_PRESS"]="LONG_PRESS",g["RAW_TOUCH"]="RAW_TOUCH";var k,m;P.TAP,P.PAN,P.PINCH,P.ROTATE,P.LONG_PRESS,P.RAW_TOUCH;(m=k=k||{})["BEGAN"]="BEGAN",m["CHANGED"]="CHANGED",m["ENDED"]="ENDED",m["CANCELED"]="CANCELED",m["FAILED"]="FAILED";var v,G,C={BEGAN:0,CHANGED:1,ENDED:2,CANCELED:3,FAILED:4};k.BEGAN,k.CHANGED,k.ENDED,k.CANCELED,k.FAILED;(G=v=v||{})["RAY_CAST"]="RAY_CAST",G["SHADER_PICK"]="SHADER_PICK";v.RAY_CAST,v.SHADER_PICK;function h(e){return a.getCoreModule().mapStringToScalar(T.ref(e),C,3)}var M=t.getNativeModule("WorldTracking"),U={};function H(e){if(!U[e]){var t=function(e){var t=a.model.graph.get(e);if(t)return new F(t)}(new a.model.NodeId(e));t&&(U[e]=t)}return U[e]}function D(e,t){return T.getReactiveModule().point(n.fromMeters(e.getScalarSignal(t+"/x")),n.fromMeters(e.getScalarSignal(t+"/y")),n.fromMeters(e.getScalarSignal(t+"/z")))}var F=(Object.defineProperty(W.prototype,"id",{get:function(){var e=this._ref.constants.identifier;return e?t.getModule("Reactive").val(e):this._ref.getStringSignal("identifier")},enumerable:!0,configurable:!0}),Object.defineProperty(W.prototype,"transform",{get:function(){return this._ref.getTransformSignal("transform")},enumerable:!0,configurable:!0}),Object.defineProperty(W.prototype,"type",{get:function(){return a.mapScalarToString(this._ref.getScalarSignal("type"),c,i.ARTrackableType.UNKNOWN)},enumerable:!0,configurable:!0}),Object.defineProperty(W.prototype,"center",{get:function(){return D(this._ref,"center")},enumerable:!0,configurable:!0}),Object.defineProperty(W.prototype,"extent",{get:function(){return D(this._ref,"extent")},enumerable:!0,configurable:!0}),Object.defineProperty(W.prototype,"normal",{get:function(){return D(this._ref,"normal")},enumerable:!0,configurable:!0}),Object.defineProperty(W.prototype,"isTracked",{get:function(){return this._ref.getBoolSignal("isTracked")},enumerable:!0,configurable:!0}),Object.defineProperty(W.prototype,"state",{get:function(){return a.mapScalarToString(this._ref.getScalarSignal("state"),A,i.ARTrackableState.UNKNOWN_ERROR)},enumerable:!0,configurable:!0}),e([t.internal,t.nonenumerable],W.prototype,"_ref",void 0),e([t.capability("worldTrackerJSAPI"),t.introducedBy(2694176835)],W.prototype,"state",null),W);function W(e){this._ref=e}var B=(Object.defineProperty(V.prototype,"transform",{get:function(){return new T.TransformSignal(M.pointTrackableTransform(this._id))},enumerable:!0,configurable:!0}),V.prototype.move=function(e){var t,r,a;M.movePointTrackable(this._id,T.ref(e.screenLocation),h(e.state),null!=(t=null==e?void 0:e.snapToPlane)&&t,I[null!=(r=null==e?void 0:e.planeType)?r:i.HitTestType.ANY_PLANE],null!=(a=null==e?void 0:e.fallbackToEstimatedPlanes)&&a)},Object.defineProperty(V.prototype,"plane",{get:function(){return new F(new a.model.ModelRef(this._planeId,"trackable",{}))},enumerable:!0,configurable:!0}),e([t.internal,t.nonenumerable],V.prototype,"_id",void 0),e([t.internal,t.nonenumerable],V.prototype,"_planeId",void 0),V=e([t.capability("multiplane")],V));function V(e,t){this._id=e,this._planeId=t}var K=(Object.defineProperty(j.prototype,"intersectionPoint",{get:function(){return this._res.position},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"trackable",{get:function(){if(0==this._res.trackableId)return null;var e=H(this._res.trackableId);if(!e)throw"Trackable in HitTestResult is no longer valid.";return e},enumerable:!0,configurable:!0}),e([t.nonenumerable],j.prototype,"_res",void 0),j=e([t.capability("multiplane")],j));function j(e){this._res=e}var w=(Object.defineProperty(Z.prototype,"geoTrackingQuality",{get:function(){return new T.ScalarSignal(M.geoTrackingQuality())},enumerable:!0,configurable:!0}),Object.defineProperty(Z.prototype,"geoTrackingLowQualityThreshold",{get:function(){return.48},enumerable:!0,configurable:!0}),Object.defineProperty(Z.prototype,"geoTrackingHighQualityThreshold",{get:function(){return.89},enumerable:!0,configurable:!0}),Z.prototype.addPointTrackableImpl=function(e){var t,r;return T.eventSourceToPromise(M.addPointTrackable(e.worldPosition.x,e.worldPosition.y,e.worldPosition.z,null!=(r=null===(t=e.trackable)||void 0===t?void 0:t._ref.id.value)?r:0)).then(function(e){return new B(e.id,new a.model.NodeId(e.plane))})},Z.prototype.addPointTrackable=function(e){return this.addPointTrackableImpl(e)},Z.prototype.addReferencePoint=function(e){return this.addPointTrackableImpl(e)},Z.prototype.deletePointTrackable=function(e){M.deletePointTrackable(e._id)},Z.prototype.deleteReferencePoint=function(e){M.deletePointTrackable(e._id)},Z.prototype.addGeoTrackable=function(e,t,r,a,n,o){return T.eventSourceToPromise(M.addGeoTrackable(e,t,r==i.ARGeoTrackableElevationType.ALTITUDE_BASED,null!=a?a:0,null!=n?n:0,null!=o?o:0)).then(function(e){var t=H(e);if(!t)throw"[WorldTracker] GeoTrackable not found!!";return t})},Z.prototype.onTrackableAdded=function(){var e;return null!=(e=this._onTrackableAdded)?e:this._onTrackableAdded=T.mapEventSource(a.model.graph.onChildConnected(new a.model.NodeId(r.trackablesChildrenNodeId)),function(e){return H(e.id.value)})},Z.prototype.onTrackableDeleted=function(){var e;return null!=(e=this._onTrackableDeleted)?e:this._onTrackableDeleted=T.mapEventSource(a.model.graph.onChildDisconnected(new a.model.NodeId(r.trackablesChildrenNodeId)),function(e){return H(e.id.value)})},Z.prototype.hitTest=function(e){var t,r;return T.eventSourceToPromise(M.hitTest(T.ref(e.screenLocation),I[null!=(t=null==e?void 0:e.hitTestType)?t:i.HitTestType.ANY_PLANE],null!=(r=null==e?void 0:e.fallbackToEstimatedPlanes)&&r)).then(function(e){return e.map(function(e){return new K(e)})})},Object.defineProperty(Z.prototype,"realWorldScaleActive",{get:function(){return new T.BoolSignal(M.realWorldScaleActive())},enumerable:!0,configurable:!0}),Object.defineProperty(Z.prototype,"realWorldScaleSupported",{get:function(){return new T.BoolSignal(M.realWorldScaleSupported())},enumerable:!0,configurable:!0}),Object.defineProperty(Z.prototype,"state",{get:function(){return a.mapScalarToString(M.state(),s,i.TrackingState.NOT_AVAILABLE)},enumerable:!0,configurable:!0}),Object.defineProperty(Z.prototype,"stateReason",{get:function(){return a.mapScalarToString(M.stateReason(),y,i.TrackingStateReason.NONE)},enumerable:!0,configurable:!0}),e([t.capability("geoanchor"),t.introducedBy(3047268080),t.nonenumerable],Z.prototype,"geoTrackingQuality",null),e([t.capability("geoanchor"),t.introducedBy(3047268080),t.nonenumerable],Z.prototype,"geoTrackingLowQualityThreshold",null),e([t.capability("geoanchor"),t.introducedBy(3047268080),t.nonenumerable],Z.prototype,"geoTrackingHighQualityThreshold",null),e([t.enumAccessor],Z.prototype,"ARTrackableType",void 0),e([t.enumAccessor],Z.prototype,"ARTrackableState",void 0),e([t.enumAccessor,t.capability("geoanchor"),t.introducedBy(610180168)],Z.prototype,"ARGeoTrackableElevationType",void 0),e([t.enumAccessor,t.capability("multiplane")],Z.prototype,"HitTestType",void 0),e([t.enumAccessor],Z.prototype,"TrackingState",void 0),e([t.enumAccessor],Z.prototype,"TrackingStateReason",void 0),e([t.nonenumerable],Z.prototype,"_onTrackableAdded",void 0),e([t.nonenumerable],Z.prototype,"_onTrackableDeleted",void 0),e([t.internal],Z.prototype,"addPointTrackableImpl",null),e([t.introducedBy(159701505),t.capability("multiplane")],Z.prototype,"addPointTrackable",null),e([t.removedBy(1314004016)],Z.prototype,"addReferencePoint",null),e([t.introducedBy(159701505),t.capability("multiplane")],Z.prototype,"deletePointTrackable",null),e([t.removedBy(1314004016)],Z.prototype,"deleteReferencePoint",null),e([t.capability("geoanchor"),t.introducedBy(610180168)],Z.prototype,"addGeoTrackable",null),e([t.capability("multiplane")],Z.prototype,"hitTest",null),Z=e([t.scriptingModule("WorldTracking")],Z));function Z(){this.ARTrackableType=i.ARTrackableType,this.ARTrackableState=i.ARTrackableState,this.ARGeoTrackableElevationType=i.ARGeoTrackableElevationType,this.HitTestType=i.HitTestType,this.TrackingState=i.TrackingState,this.TrackingStateReason=i.TrackingStateReason}return i.ARPointTrackable=B,i.ARTrackable=F,i.HitTestResult=K,i.WorldTrackingModule=w,i.toInternalGestureState=h,i}({},arfx,CoreModule,params,UnitsModule,ReactiveModule);