var CoreModule=function(t,e,r){"use strict";var i=e.getNativeModule("Core");var u=(n.prototype.isEmpty=function(){return 0==this.value},n.prototype.equals=function(t){return this.value===t.value},n.EMPTY=new n(0),n);function n(t){this.value=t}function o(t){var e;return new a(new u(t.id),t.kind,null!=(e=t.constants)?e:{})}var a=(l.prototype.getBoolSignal=function(t){return new r.BoolSignal(i.getBoolSignal(this.id.value,t))},l.prototype.getScalarSignal=function(t){return new r.ScalarSignal(i.getScalarSignal(this.id.value,t))},l.prototype.getStringSignal=function(t){return new r.StringSignal(i.getStringSignal(this.id.value,t))},l.prototype.getDimenSignal=function(t){return new r.ScalarSignal(i.getDimenSignal(this.id.value,t))},l.prototype.getTransformSignal=function(t){return new r.TransformSignal(i.getTransformSignal(this.id.value,t))},l.prototype.getBool=function(t){return r.eventSourceToPromise(i.getBoolProp(this.id.value,t))},l.prototype.getScalar=function(t){return r.eventSourceToPromise(i.getScalarProp(this.id.value,t))},l.prototype.getString=function(t){return r.eventSourceToPromise(i.getStringProp(this.id.value,t))},l.prototype.getBoolSync=function(t){return i.getBoolPropSync(this.id.value,t)},l.prototype.getScalarSync=function(t){return i.getScalarPropSync(this.id.value,t)},l.prototype.getStringSync=function(t){return i.getStringPropSync(this.id.value,t)},l.prototype.getDimenSync=function(t){return i.getDimenPropSync(this.id.value,t)},l.prototype.getHsvaVecSignal=function(t){return new r.HsvaSignal(this.getScalarSignal(t+"/x"),this.getScalarSignal(t+"/y"),this.getScalarSignal(t+"/z"),this.getScalarSignal(t+"/w"))},l.prototype.setBoolProp=function(t,e){"boolean"==typeof e?i.setBool(this.id.value,t,e):i.bindBool(this.id.value,t,r.ref(e))},l.prototype.setScalarProp=function(t,e){"number"==typeof e?i.setScalar(this.id.value,t,e):i.bindScalar(this.id.value,t,r.ref(e))},l.prototype.setStringProp=function(t,e){"string"==typeof e?i.setString(this.id.value,t,e):i.bindString(this.id.value,t,r.ref(e))},l.prototype.setStringAsync=function(t,e){return r.eventSourceToPromise(i.setStringAsync(this.id.value,t,e)).then(function(t){})},l.prototype.setDimenProp=function(t,e){"number"==typeof e?i.setDimen(this.id.value,t,e):i.bindDimen(this.id.value,t,r.ref(e))},l.prototype.setColorProp=function(t,e){i.bindScalar(this.id.value,t,r.ref(r.toBgrxSignal(e)))},l.prototype.setHsvaVecProp=function(t,e){i.bindScalar(this.id.value,t+"/x",r.ref(e._components[0])),i.bindScalar(this.id.value,t+"/y",r.ref(e._components[1])),i.bindScalar(this.id.value,t+"/z",r.ref(e._components[2])),i.bindScalar(this.id.value,t+"/w",r.ref(e._components[3]))},l.prototype.notifyChanged=function(t){i.notifyChanged(this.id.value,t)},l.prototype.getArrayRefProp=function(t){return r.eventSourceToPromise(i.getArrayRefProp(this.id.value,t)).then(o)},l.prototype.getArrayRefPropSync=function(t){var e=i.getArrayRefPropSync(this.id.value,t);return null==e?null:o(e)},l.prototype.getChildren=function(){return r.eventSourceToPromise(i.getChildren(this.id.value)).then(function(t){return t.map(o)})},l.prototype.getChildrenSync=function(){return i.getChildrenSync(this.id.value).map(o)},l.prototype.addChild=function(t){return r.eventSourceToPromise(i.connectToParent(t.id.value,this.id.value)).then(function(t){})},l.prototype.destroy=function(){if(this.id.equals(u.EMPTY))return Promise.resolve();var e=this;return r.eventSourceToPromise(i.remove(this.id.value)).then(function(t){return v.remove(e.id)})},l);function l(t,e,n){this.id=t,this.kind=e,this.constants=n}var s,c,d=function(t,e,n){this.parent=u.EMPTY,this.next=u.EMPTY,this.prev=u.EMPTY,this.firstChild=u.EMPTY,this.lastChild=u.EMPTY,this.ref=new a(t,e,null!=n?n:{})};function p(){this.nodes=[null],this.onConnected={},this.onDisconnected={};var e=this;i.registerModelSyncHandler(function(t){return e.apply(t)})}(c=s=s||{})[c["CONTINUE"]=0]="CONTINUE",c[c["SKIP_CHILDREN"]=1]="SKIP_CHILDREN",c[c["STOP"]=2]="STOP";var h,f,v=new(p.prototype.create=function(t,e){return r.eventSourceToPromise(i.create(t,0,e)).then(function(t){return v.apply({removed:[],updated:[t]}),v.getOrThrow(new u(t.id))})},p.prototype.clone=function(t,e){return r.eventSourceToPromise(i.clone(t.id.value,0,e)).then(function(t){return v.apply({removed:[],updated:[t]}),v.getOrThrow(new u(t.id))})},p.prototype.apply=function(t){for(var e=0;e<t.removed.length;++e)this.remove(new u(t.removed[e]));for(e=0;e<t.updated.length;++e)this.update(t.updated[e])},p.prototype.get=function(t){var e;return null===(e=this.nodes[t.value])||void 0===e?void 0:e.ref},p.prototype.getOrThrow=function(t){return this.getNode(t).ref},p.prototype.getNode=function(t){var e=this.nodes[t.value];if(null==e)throw new Error("Node not found for id "+t.value);return e},p.prototype.update=function(t){var e,n=new u(t.id),r=this.nodes[t.id];if(null==r){for(r=new d(n,t.kind,t.constants);this.nodes.length<t.id;)this.nodes.push(null);this.nodes[t.id]=r}else r.ref.kind=t.kind,r.ref.constants=null!=(e=t.constants)?e:r.ref.constants;r.parent.isEmpty()||this.disconnect(n),t.parent&&this.connect(n,new u(t.parent),t.prev?new u(t.prev):void 0)},p.prototype.connect=function(t,e,n){var r,i=this.getNode(t);i.parent=e;var o=this.nodes[e.value];if(o){if(null==n)i.prev=u.EMPTY,i.next=o.firstChild,o.firstChild=t,o.lastChild.isEmpty()&&(o.lastChild=o.firstChild);else{var a=this.getNode(n);i.prev=n,i.next=a.next,a.next=t,o.lastChild.equals(n)?o.lastChild=t:this.getNode(i.next).prev=t}null!==(r=this.onConnected[e.value])&&void 0!==r&&r.notify(i.ref)}else i.prev=u.EMPTY,i.next=u.EMPTY},p.prototype.disconnect=function(t){var e,n=this.nodes[t.value];if(n){var r=n.parent.value,i=this.nodes[r];i&&(i.firstChild.equals(t)&&(i.firstChild=n.next),i.lastChild.equals(t)&&(i.lastChild=n.prev)),n.prev.isEmpty()||(this.getNode(n.prev).next=n.next),n.next.isEmpty()||(this.getNode(n.next).prev=n.prev),n.parent=u.EMPTY,n.prev=u.EMPTY,n.next=u.EMPTY,null!==(e=this.onDisconnected[r])&&void 0!==e&&e.notify(n.ref)}},p.prototype.remove=function(t){this.disconnect(t);var e=this.nodes[t.value];null!=e&&(e.ref.id=u.EMPTY,this.nodes[t.value]=null,delete this.onConnected[t.value],delete this.onDisconnected[t.value])},p.prototype.dfs=function(t,e){for(var n=this.getNode(t).firstChild;!n.isEmpty();){var r=this.getNode(n),i=e(r.ref);if(i==s.STOP)return;if(i!=s.CONTINUE||r.firstChild.isEmpty()){for(;!n.equals(t)&&r.next.isEmpty();)n=r.parent,r=this.getNode(n);if(n.equals(t))return;n=r.next}else n=r.firstChild}},p.prototype.onChildConnected=function(t){var e;return null!=(e=this.onConnected[t.value])?e:this.onConnected[t.value]=new r.Observable},p.prototype.onChildDisconnected=function(t){var e;return null!=(e=this.onDisconnected[t.value])?e:this.onDisconnected[t.value]=new r.Observable},p),g=Object.freeze({__proto__:null,NodeId:u,nodeToModelRef:o,ModelRef:a,get DfsVisitBehavior(){return s},graph:v});(f=h=h||{})[f["CHAR"]=0]="CHAR",f[f["WILDCARD"]=1]="WILDCARD";var S=(y.prototype.isWildcard=function(){return this.kind==h.WILDCARD},y);function y(t,e){this.kind=t,this.char=null!=e?e:""}var m=(P.prototype.matches=function(t){for(var e=[!0],n=0;n<t.length;++n)e.push(!1);for(var r=0;r<this.tokens.length;++r){var i=this.tokens[r],o=e[0];for(e[0]=e[0]&&i.isWildcard(),n=0;n<t.length;++n){var a=e[n+1];e[n+1]=i.isWildcard()?a||e[n]:o&&t.charAt(n)==i.char,o=a}}return e[t.length]},P);function P(t){this.tokens=[],this.tokens="string"==typeof t?function(t){for(var e=[],n=!1,r=0;r<t.length;++r){var i=t.charAt(r);"\\"!==i||n?"*"!==i||n?(e.push(new S(h.CHAR,i)),n=!1):e.push(new S(h.WILDCARD)):n=!0}return e}(t):t}function C(t,e,n,r){var i=[];return v.dfs(t,function(t){return e(t)&&i.push(t),null==r||r<1||i.length<r?n?s.CONTINUE:s.SKIP_CHILDREN:s.STOP}),i}function T(t,e){var n=t.constants[e];return null==n||"string"!=typeof n?void 0:n}var w=Object.freeze({__proto__:null,Pattern:m,children:function(t){var e=[];return v.dfs(t,function(t){return e.push(t),s.SKIP_CHILDREN}),e},findByName:function(t,e,n,r){var i=new m(e);return C(t,function(t){var e=T(t,"name");return null!=e&&i.matches(e)},n,r)},findByIdentifier:function(t,e,n,r){return C(t,function(t){return T(t,"identifier")===e},n,r)}});return t.getCoreModule=function(){return i},t.log=function(t){i.log(t)},t.mapScalarToString=function(t,e,n){return new r.StringSignal(i.mapScalarToString(r.ref(t),e,n))},t.mapStringToScalar=function(t,e,n){return new r.ScalarSignal(i.mapStringToScalar(r.ref(t),e,n))},t.model=g,t.model_search=w,t}({},arfx,ReactiveModule);