var BlocksModule=function(e,i,o,r,n,u){"use strict";var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function t(e,t,n,o){var r,i=arguments.length,u=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;0<=a;a--)(r=e[a])&&(u=(i<3?r(u):3<i?r(t,n,u):r(t,n))||u);return 3<i&&u&&Object.defineProperty(t,n,u),u}var c=i.getNativeModule("Blocks");function l(e){return e&&e.toVec4?e.toVec4():void 0}var p=(s.prototype.getBoolean=function(e){return o.eventSourceToPromise(c.getInput(e,0)).then(function(e){return new o.BoolSignal(e)})},s.prototype.getScalar=function(e){return o.eventSourceToPromise(c.getInput(e,1)).then(function(e){return new o.ScalarSignal(e)})},s.prototype.getString=function(e){return o.eventSourceToPromise(c.getInput(e,2)).then(function(e){return new o.StringSignal(e)})},s.prototype.getPoint=function(e){return o.eventSourceToPromise(c.getInput(e,3)).then(function(e){return new o.PointSignal(e)})},s.prototype.getVector=function(e){return o.eventSourceToPromise(c.getInput(e,4)).then(function(e){return new o.VectorSignal(e)})},s.prototype.getColor=function(e){return o.eventSourceToPromise(c.getInput(e,5)).then(function(e){return o.rgbaFromVec4(new o.Vec4Signal(e))})},s.prototype.getPoint2D=function(e){return o.eventSourceToPromise(c.getInput(e,6)).then(function(e){return new o.Vec2Signal(e)})},s.prototype.getShader=function(e){return o.eventSourceToPromise(c.getInput(e,7)).then(function(e){return new o.ShaderSignal(e)})},s.prototype.getPulse=function(e){return o.eventSourceToPromise(c.getInput(e,8)).then(function(e){return new o.EventSource(e)})},s.prototype.getBooleanOrFallback=function(e,t){return new o.BoolSignal(c.getInputOrFallback(e,0,o.ref(t)))},s.prototype.getScalarOrFallback=function(e,t){return new o.ScalarSignal(c.getInputOrFallback(e,1,o.ref(t)))},s.prototype.getStringOrFallback=function(e,t){return new o.StringSignal(c.getInputOrFallback(e,2,o.ref(t)))},s.prototype.getPointOrFallback=function(e,t){return new o.PointSignal(c.getInputOrFallback(e,3,o.ref(t)))},s.prototype.getVectorOrFallback=function(e,t){return new o.VectorSignal(c.getInputOrFallback(e,4,o.ref(t)))},s.prototype.getColorOrFallback=function(e,t){return o.rgbaFromVec4(new o.Vec4Signal(c.getInputOrFallback(e,5,o.ref(l(t)))))},s.prototype.getPoint2DOrFallback=function(e,t){return new o.Vec2Signal(c.getInputOrFallback(e,6,o.ref(t)))},s.prototype.getShaderOrFallback=function(e,t){return new o.ShaderSignal(c.getInputOrFallback(e,7,o.ref(t)))},s.prototype.getPulseOrFallback=function(e,t){return new o.EventSource(c.getInputOrFallback(e,8,o.ref(t)))},s=t([i.capability("blocksScripting"),i.availableIn(i.DocumentType.SubEffect)],s));function s(){}var y=(f.prototype.setBoolean=function(e,t){return o.eventSourceToPromise(c.setOutput(e,0,o.ref(t)))},f.prototype.setScalar=function(e,t){return o.eventSourceToPromise(c.setOutput(e,1,o.ref(t)))},f.prototype.setString=function(e,t){return o.eventSourceToPromise(c.setOutput(e,2,o.ref(t)))},f.prototype.setPoint=function(e,t){return o.eventSourceToPromise(c.setOutput(e,3,o.ref(t)))},f.prototype.setVector=function(e,t){return o.eventSourceToPromise(c.setOutput(e,4,o.ref(t)))},f.prototype.setColor=function(e,t){return o.eventSourceToPromise(c.setOutput(e,5,o.ref(l(t))))},f.prototype.setPoint2D=function(e,t){return o.eventSourceToPromise(c.setOutput(e,6,o.ref(t)))},f.prototype.setShader=function(e,t){return o.eventSourceToPromise(c.setOutput(e,7,o.ref(t)))},f.prototype.setPulse=function(e,t){return o.eventSourceToPromise(c.setOutput(e,8,o.ref(t)))},f=t([i.capability("blocksScripting"),i.availableIn(i.DocumentType.SubEffect)],f));function f(){}var b=(d.prototype.findFirst=function(e){return this.findUsingPattern(e.replace(/\\/g,"\\\\").replace(/\*/g,"\\*"),{limit:1}).then(function(e){return 0==e.length?null:e[0]})},d.prototype.getAll=function(){return this.findUsingPattern("*")},d.prototype.findUsingPattern=function(e,t){return Promise.resolve(r.model_search.findByName(new r.model.NodeId(n.blockPrototypesChildrenNodeId),e,!1,null==t?void 0:t.limit).map(function(e){return new g(e)}))},d.prototype.createFromExternal=function(t,e){void 0===e&&(e={});var n=null;return r.model.graph.create("externalBlockPrototype",e.name).then(function(e){return(n=e).setStringAsync("fbid",t).then(function(){return e})}).then(function(e){return o.eventSourceToPromise(c.addExternalBlockPrototype(e.id.value)).then(function(){return e})}).then(function(e){return new P(e,t)}).catch(function(t){return null!==n?n.destroy().then(function(e){return Promise.reject(t)}):Promise.reject(t)})},t([i.availableIn(i.DocumentType.Any)],d.prototype,"findFirst",null),t([i.availableIn(i.DocumentType.Any)],d.prototype,"getAll",null),t([i.availableIn(i.DocumentType.Any)],d.prototype,"findUsingPattern",null),t([i.availableIn(i.DocumentType.Any),i.introducedBy(4030543761),i.capability("externalBlocks")],d.prototype,"createFromExternal",null),d=t([i.capability("blocks"),i.introducedBy(1470402116),i.availableIn(i.DocumentType.Any),i.extensible],d));function d(){}var g=(Object.defineProperty(m.prototype,"identifier",{get:function(){return this._ref.constants.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"name",{get:function(){return this._ref.constants.name},enumerable:!0,configurable:!0}),t([i.internal,i.nonenumerable],m.prototype,"_ref",void 0),t([i.availableIn(i.DocumentType.Any)],m.prototype,"identifier",null),t([i.availableIn(i.DocumentType.Any)],m.prototype,"name",null),m=t([i.capability("blocks"),i.introducedBy(1470402116),i.availableIn(i.DocumentType.Any)],m));function m(e){this._ref=e}var v,S,k,P=(a(S=h,k=v=g),S.prototype=null===k?Object.create(k):(I.prototype=k.prototype,new I),Object.defineProperty(h.prototype,"remoteId",{get:function(){return this._fbid},enumerable:!0,configurable:!0}),t([i.internal,i.nonenumerable],h.prototype,"_fbid",void 0),t([i.availableIn(i.DocumentType.Any)],h.prototype,"remoteId",null),h=t([i.availableIn(i.DocumentType.Any),i.introducedBy(4030543761),i.capability("blocks"),i.capability("externalBlocks")],h));function I(){this.constructor=S}function h(e,t){var n=v.call(this,e)||this;return n._fbid=t,n}function O(o,r){void 0===r&&(r={});var e=Promise.resolve("");return i.version.hasCapability("blocksDownloadable")&&(e=B(o)),e.then(function(){var e,t=null!=(e=r["name"])?e:"dynamicBlock";""==t&&(t="dynamicBlock");var n=null;try{return n=c.instantiate(o,t),r&&u.applySceneObjectInitialState(u.getSceneObject(n),r),u.addCreatedSceneObject(n.identifier).then(function(e){return e})}catch(e){return n?i.getModule("Scene").destroy(u.getSceneObject(n)).then(function(){return Promise.reject(e)}):Promise.reject(e)}})}function B(e){return o.eventSourceToPromise(c.download(e))}var T=w=t([i.scriptingModule("Blocks"),i.availableIn(i.DocumentType.Any),i.capability("blocks"),i.capability("scriptingDynamicInstantiation"),i.extensible],w);function w(){}var D=_=t([i.scriptingModule("Blocks"),i.availableIn(i.DocumentType.Any),i.capability("blocks"),i.capability("blocksScripting"),i.extensible],_);function _(){}var x=F=t([i.scriptingModule("Blocks"),i.availableIn(i.DocumentType.Any),i.capability("blocks"),i.introducedBy(1470402116),i.extensible],F);function F(){}var A=(Object.defineProperty(j.prototype,"inputs",{get:function(){return void 0===this._inputs&&(this._inputs=new p),this._inputs},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"outputs",{get:function(){return void 0===this._outputs&&(this._outputs=new y),this._outputs},enumerable:!0,configurable:!0}),t([i.internal,i.nonenumerable],j.prototype,"_inputs",void 0),t([i.internal,i.nonenumerable],j.prototype,"_outputs",void 0),t([i.capability("blocksScripting"),i.availableIn(i.DocumentType.SubEffect)],j.prototype,"inputs",null),t([i.capability("blocksScripting"),i.availableIn(i.DocumentType.SubEffect)],j.prototype,"outputs",null),j=t([i.extension(T),i.extension(D),i.extension(x)],j));function j(){}var M=(E.prototype.instantiate=function(e,t){return void 0===t&&(t={}),O(e,t)},E.prototype.download=function(e){return B(e)},t([i.capability("scriptingDynamicInstantiation"),i.availableIn(i.DocumentType.Any),i.removedBy(1470402116)],E.prototype,"instantiate",null),t([i.capability("blocksDownloadable"),i.removedBy(1470402116)],E.prototype,"download",null),E=t([i.extension(T),i.extension(D),i.extension(x),i.removedBy(1470402116)],E));function E(){}var V=(C.prototype.instantiate=function(e,t){return void 0===t&&(t={}),O(e instanceof g?e.name:e,t)},C.prototype.download=function(e){return B(e instanceof g?e.name:e)},t([i.capability("scriptingDynamicInstantiation"),i.availableIn(i.DocumentType.Any),i.introducedBy(1470402116)],C.prototype,"instantiate",null),t([i.capability("blocksDownloadable"),i.introducedBy(1470402116)],C.prototype,"download",null),C=t([i.extension(T),i.extension(D),i.extension(x),i.introducedBy(1470402116)],C));function C(){}var N=(Object.defineProperty(R.prototype,"assets",{get:function(){return void 0===this._assets&&(this._assets=new b),this._assets},enumerable:!0,configurable:!0}),t([i.internal,i.nonenumerable],R.prototype,"_assets",void 0),t([i.introducedBy(1470402116)],R.prototype,"assets",null),R=t([i.extension(T),i.extension(D),i.extension(x)],R));function R(){}return e.BlockAsset=g,e.BlockAssets=b,e.BlockInstanceInputs=p,e.BlockInstanceOutputs=y,e.BlocksModuleAssetsExtension=N,e.BlocksModuleDynamicInstantiation=V,e.BlocksModuleDynamicInstantiationExtension=M,e.BlocksModuleForBlockAssetsApi=x,e.BlocksModuleForBlocksScriptingIo=D,e.BlocksModuleForDynamicInstantiation=T,e.BlocksModuleIoExtension=A,e.ExternalBlockAsset=P,e}({},arfx,ReactiveModule,CoreModule,params,SceneModule);